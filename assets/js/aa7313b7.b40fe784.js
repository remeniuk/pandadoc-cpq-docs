"use strict";(self.webpackChunkpandadoc_cpq_docs=self.webpackChunkpandadoc_cpq_docs||[]).push([[6670],{1881:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"reference/quote-rules-formulas/references/referencing-aliases-current-item","title":"References to Sections and Line items. Specific reference: [Current item]","description":"Introduction","source":"@site/docs/reference/quote-rules-formulas/05-references/02-referencing-aliases-current-item.md","sourceDirName":"reference/quote-rules-formulas/05-references","slug":"/reference/quote-rules-formulas/references/referencing-aliases-current-item","permalink":"/pandadoc-cpq-docs/reference/quote-rules-formulas/references/referencing-aliases-current-item","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Referencing Quote totals and Data fields (Quote variables)","permalink":"/pandadoc-cpq-docs/reference/quote-rules-formulas/references/simple-references"},"next":{"title":"Date and Time Functions","permalink":"/pandadoc-cpq-docs/reference/quote-rules-formulas/supported-formulas/date-time-functs"}}');var s=i(4848),r=i(8453);const l={},c="References to Sections and Line items. Specific reference: [Current item]",o={},a=[{value:"Introduction",id:"introduction",level:2},{value:"How to Use References in the Rule Builder",id:"how-to-use-references-in-the-rule-builder",level:2},{value:"1. Using Aliases for Sections and Line Items",id:"1-using-aliases-for-sections-and-line-items",level:2},{value:"Example: Setting the First Section Total in the Grand Total",id:"example-setting-the-first-section-total-in-the-grand-total",level:3},{value:"Note:",id:"note",level:3},{value:"2. Referencing Each Line Item with [Current Item] During Iteration",id:"2-referencing-each-line-item-with-current-item-during-iteration",level:2},{value:"Example: Custom Calculation for Line Items",id:"example-custom-calculation-for-line-items",level:3},{value:"Example Scenario:",id:"example-scenario",level:3},{value:"3. Referencing to all elements from the filtered section",id:"3-referencing-to-all-elements-from-the-filtered-section",level:2},{value:"Example: You need to calculate custom section total for the specific section",id:"example-you-need-to-calculate-custom-section-total-for-the-specific-section",level:3},{value:"Example Scenario:",id:"example-scenario-1",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"references-to-sections-and-line-items-specific-reference-current-item",children:"References to Sections and Line items. Specific reference: [Current item]"})}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"Almost every time, you may encounter a situation where you need to introduce custom calculations in your quote. This requires referencing various values within the quote, such as:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Section values"}),"\n",(0,s.jsx)(n.li,{children:"Line item values"}),"\n",(0,s.jsx)(n.li,{children:"Grand total"}),"\n",(0,s.jsx)(n.li,{children:"Data fields"}),"\n",(0,s.jsx)(n.li,{children:"Quote variables"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This document explains how to reference these values and perform custom calculations step-by-step."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"how-to-use-references-in-the-rule-builder",children:"How to Use References in the Rule Builder"}),"\n",(0,s.jsxs)(n.p,{children:["When you want to perform a custom calculation, assign data, or apply mathematical operations to data in a quote, you will need to use references. Simply open a text box and type the ",(0,s.jsx)(n.code,{children:"="})," sign. Our UI will then display all possible references and formulas that you can use. This feature ensures that you can easily find and use the correct fields or calculations for your requirements."]}),"\n",(0,s.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:"0",overflow:"hidden"},children:(0,s.jsx)("iframe",{src:"https://www.loom.com/embed/1fda4fd5f15448ce893a7929b638975e?sid=d810019f-d447-46a8-9249-08cc98d91470",frameBorder:"0",allowFullScreen:!0,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"1-using-aliases-for-sections-and-line-items",children:"1. Using Aliases for Sections and Line Items"}),"\n",(0,s.jsx)(n.h3,{id:"example-setting-the-first-section-total-in-the-grand-total",children:"Example: Setting the First Section Total in the Grand Total"}),"\n",(0,s.jsx)(n.p,{children:"You can refer to specific sections in your quote using aliases. For example, to set the first section total in the grand total:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create an Alias for a Section in WHEN clause:"}),"\nBuild a condition to find a section by name, such as ",(0,s.jsx)(n.code,{children:"products"}),". Assign the result to an alias:\nIf multiple sections share the same name, the alias will include all matching sections."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Refer to a Specific Section in THEN clause:"}),"\nUse indexing to select the first section from the alias and reference its total:\n",(0,s.jsx)(n.img,{alt:"referencing_alias_section_1.png",src:i(9742).A+"",width:"1416",height:"415"})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Save and Run the Rule:"}),"\nVerify that the grand total\u2019s first section total reflects the value from the selected section.\n",(0,s.jsx)(n.img,{alt:"referencing_alias_section_1_result.png",src:i(1136).A+"",width:"1404",height:"600"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"note",children:"Note:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Aliases simplify working with grouped data like sections or line items."}),"\n",(0,s.jsx)(n.li,{children:"Indexing lets you pick specific elements when aliases contain multiple items."}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-referencing-each-line-item-with-current-item-during-iteration",children:"2. Referencing Each Line Item with [Current Item] During Iteration"}),"\n",(0,s.jsx)(n.h3,{id:"example-custom-calculation-for-line-items",children:"Example: Custom Calculation for Line Items"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Filter Line Items in WHEN clause:"}),"\nUse conditions to filter line items, such as selecting only items with a price greater than zero:"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Apply Custom Calculations in THEN clause:"}),"\nSum the prices of the line item and quantity using [Current Item] reference to update each line item individually during iteration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Custom total = [Current item.Price] * [Current item.Quantity]\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"referencing_current_item.png",src:i(3951).A+"",width:"1361",height:"463"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-scenario",children:"Example Scenario:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Line items with prices ",(0,s.jsx)(n.code,{children:"$10"})," and ",(0,s.jsx)(n.code,{children:"$234"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Quantities ",(0,s.jsx)(n.code,{children:"1"})," and ",(0,s.jsx)(n.code,{children:"2"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The custom total for each line item is calculated, summed, and stored in the Custom total field.\n",(0,s.jsx)(n.img,{alt:"referencing_current_item_result.png",src:i(2123).A+"",width:"1400",height:"448"})]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-referencing-to-all-elements-from-the-filtered-section",children:"3. Referencing to all elements from the filtered section"}),"\n",(0,s.jsx)(n.h3,{id:"example-you-need-to-calculate-custom-section-total-for-the-specific-section",children:"Example: You need to calculate custom section total for the specific section"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create a custom field in the section footer"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"First section total\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create rule where filter specific sections line items in the THEN clause"}),"\nUse conditions to filter specific section line items, such as selecting section by its name and only items from that section with a price greater than zero:"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Apply Custom Calculations in THEN clause:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"First section total = SUM([Alias.Line items 1.All element.Custom total(line item)])\n"})}),"\n",(0,s.jsx)(n.img,{alt:"references_to_all_the_line_items.png",src:i(7635).A+"",width:"1400",height:"450"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"example-scenario-1",children:"Example Scenario:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Line items with Custom total ",(0,s.jsx)(n.code,{children:"$100"})," and ",(0,s.jsx)(n.code,{children:"$2340"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The First section total is calculated, summed as ",(0,s.jsx)(n.code,{children:"$100 + $2340"}),"\n",(0,s.jsx)(n.img,{alt:"first_section_tota_calculation_result.png",src:i(4862).A+"",width:"1410",height:"665"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"References:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Use aliases for sections or line items to organize data."}),"\n",(0,s.jsx)(n.li,{children:"Apply indexing to target specific elements within aliases."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Filtering:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Apply conditions to narrow down the data (e.g., ",(0,s.jsx)(n.code,{children:"Price > 0"}),")."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Calculations:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use arithmetic operations (",(0,s.jsx)(n.code,{children:"+"}),", ",(0,s.jsx)(n.code,{children:"*"}),", etc.) and aggregation functions (",(0,s.jsx)(n.code,{children:"SUM"}),", ",(0,s.jsx)(n.code,{children:"AVG"}),", etc.)."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Iteration:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Leverage ",(0,s.jsx)(n.code,{children:"[Current item]"})," reference to update elements one at a time during iteration."]}),"\n"]}),"\n"]}),"\n"]})}),"\n",(0,s.jsx)(n.p,{children:"This structured approach enables you to create advanced custom calculations and dynamically update values in your quotes, improving flexibility and efficiency."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},4862:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/first_section_tota_calculation_result-6af80435efe5b27c9fade30324baa978.png"},7635:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/references_to_all_the_line_items-d631b25062d2bfdcd49fbad6b0f384aa.png"},9742:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/referencing_alias_section_1-847941f722b054e92d034a52a76c7a4f.png"},1136:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/referencing_alias_section_1_result-0d4c4221e5aa80efd1b2e9cdfe48246e.png"},3951:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/referencing_current_item-371f3912fb7fc19f304896de9b6aef64.png"},2123:(e,n,i)=>{i.d(n,{A:()=>t});const t=i.p+"assets/images/referencing_current_item_result-729c6e0e1113072963c4528f4e2d0a29.png"},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>c});var t=i(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);